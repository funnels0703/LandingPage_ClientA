generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model click {
  id       Int     @id @default(autoincrement())
  url_code String? @db.VarChar(255)
  ip       String? @db.VarChar(255)

  @@unique([url_code, ip], map: "url_code_ip")
}

model funnels_db {
  id         Int       @id @default(autoincrement())
  apply      String?   @db.VarChar(30)
  region     String?   @db.VarChar(10)
  name       String?   @db.VarChar(20)
  phone      String?   @db.VarChar(20)
  revenue    String?   @db.VarChar(20)
  memo       String?   @db.Text
  privacy    String?   @default("0") @db.VarChar(5)
  created_at DateTime? @default(now()) @db.Timestamp(0)
  service    String?   @db.VarChar(30)
}

model url_code_setting {
  id                  Int           @id @default(autoincrement())
  hospital_name       String        @db.VarChar(255)
  user_id             Int
  url_code            String        @unique(map: "url_code_unique") @db.VarChar(255)
  db_request_count    Int?          @default(0)
  db_click_count      Int?          @default(0)
  created_at          DateTime?     @default(now()) @db.Timestamp(0)
  updated_at          DateTime?     @default(now()) @db.Timestamp(0)
  ad_title            String        @db.VarChar(255)
  ad_number           String        @db.VarChar(50)
  advertising_company String        @db.VarChar(25)
  hospital_procedure  String?       @db.VarChar(255)
  customor_db         customor_db[]
}

model customor_db {
  id                Int               @id @default(autoincrement())
  dividend_status   String?           @db.VarChar(5)
  date              DateTime?         @db.Timestamp(0)
  name              String?           @db.VarChar(50)
  phone             String            @db.VarChar(20)
  initial_status    String?           @db.VarChar(50)
  no_answer_count   Int?              @default(0)
  recall_request_at DateTime?         @db.Timestamp(0)
  reservation_date  DateTime?         @db.Timestamp(0)
  visit_status      String?           @db.VarChar(50)
  url_code          String?           @db.VarChar(255)
  created_at        DateTime?         @default(now()) @db.Timestamp(0)
  data_status       Int?              @default(0) @db.TinyInt
  url_code_setting  url_code_setting? @relation(fields: [url_code], references: [url_code], onDelete: NoAction, onUpdate: NoAction, map: "fk_url_code")

  @@unique([phone, url_code], map: "phone_url_code_unique")
  @@index([url_code], map: "fk_url_code")
}
